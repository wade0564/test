<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Cache-Control" content="no-cache">
		<meta http-equiv="Pragma" content="no-cache">
		<!-- general css -->
		<link href="stylesheets/lib/redmond/jquery-ui-1.10.1.custom.css" rel="stylesheet" type="text/css" />
		<link href="stylesheets/lib/XCommonUI-3.0.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			.xui_hightened{font-size:1.1em;}
			.xui_content_body{line-height:1.5em;font-size:11pt;}
			#download{float:right;font-size:10pt;margin-top:-8px;}
			.snapshot{border:2px solid #888;-webkit-box-shadow: 0 0 8px #333;-moz-box-shadow: 0 0 8px #333;box-shadow: 0 0 8px #333;}
		</style>
		<!-- specific css -->
		<title></title>
		<!-- general js -->
		<script type="text/javascript" src="javascripts/lib/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="javascripts/lib/jquery-ui-1.10.1.custom.min.js"></script>
		<script type="text/javascript" src="javascripts/lib/XCommon-3.0.js"></script>
		<script type="text/javascript" src="javascripts/lib/XCommon-Document-3.0.js"></script>
	</head>
	<body>
		<div id="head">
		</div>
		<div id="menu">
		</div>
		<div id="content">
			<div class="xui_url_dir">
				<span>:: XCommon Document > Welcome</span>
				<div id="download">Get to use it!</div>
				<div class="xui_clear"></div>
			</div>
			<div class="xui_title_bar">
				Welcome to XCommon Document!
			</div>
			<div class="xui_content_body">
				<div id="extensionsDoc">
					<h1 class="xui_hightened">$.namespace(<i>string</i>)</h1>
					This function will create a namespace for a certain module, in order to provide a 
					functional scope and not pollute the global space.
					<br/><br/>
					<h1 class="xui_hightened">Array.prototype.indexOf(<i>element</i>)</h1>
					This function returns the index of some element in current array.
					<br/><br/>
					<h1 class="xui_hightened">Array.prototype.each(<i>function</i>)</h1>
					The parameter works as a callback, which will be invoked on each element of current 
					array. It will pass the element and the corresponding index into the callback function.
					<br/>
					<i>Example: 
					<pre>
	var arr=[1,2,3];
	arr.each(function(element,index){
		//Here goes some logic with parameter 'element' and 'index'
	});
					</pre>
					</i>
					<h1 class="xui_hightened">Array.prototype.clone()</h1>
					This function returns the copy of current array.
					<br/><br/>
					<h1 class="xui_hightened">Array.prototype.mapClone(<i>function</i>)</h1>
					The parameter works as a callback function on each element and its index.
					It returns a a copy of current array, elements of which is the return value of the callback function.
					<br/>
					<i>Example: 
					<pre>
	var arr=['a','b','c'];
	var newArr=arr.mapClone(function(element,index){
		return index+":"+element;
	});
	//newArr: ['0:a','1:b','2:c']
					</pre>
					</i>
					<h1 class="xui_hightened">String.prototype.trim()</h1>
					Works just like in Java.
					<br/><br/>
					<h1 class="xui_hightened">String.prototype.format(<i>{key1:val1,key2:val2, ...} OR val1,val2,...</i>)</h1>
					This function will replace the format string and return a new string.<br/>
					It has two ways to pass parameters, json style or list style.
					<br/>
					<i>Example: 
					<pre>
	var template1="{somebody} will arrive at {time}";
	var result1=template1.format({"somebody":"peter","time":"12:00"}); 
	//result1: peter will arrive at 12:00
	var template2="{0} will arrive at {1}";
	var result2=template2.format("peter","12:00");
	//same with result1
					</pre>
					</i>
					<h1 class="xui_hightened">Object.create(<i>object</i>)</h1>
					Implementation of prototype inheritance.
					<br/><br/>
					<h1 class="xui_hightened">Function.prototype.bind(<i>thisArgument</i>)</h1>
					Bind the function to the given 'this' context and return it as a new function object. 
					<br/><br/>
					<h1 class="xui_hightened">Function.prototype.curry(<i>arg1 [,arg2,arg3...]</i>)</h1>
					Curry style. The parameters of this function can be not complete, and it returns a curry function.
					<br/>
					<i>Example: 
					<pre>
	function add(n1,n2,n3,n4){
		return n1+n2+n3+n4;
	}
	var addCurry=add.curry(1,2);
	addCurry(3,4); // 1+2+3+4=10
	addCurry(5,6); // 1+2+5+6=14
					</pre>
					</i>
				</div>
				<div id="utilDoc">
					<h1 class="xui_hightened">COM.EMC.UTIL.requireJS(<i>url [,callback]</i>)</h1>
					This function will import the javascript library file asynchronizedly with the url parameter.
					The callback parameter is optional, when complete loading this resource, it will be invoked.
					<br/>To be metioned, if you do not pass 'callback' parameter, it will load this resource syncronizedly, which will block the 
					script execution until finish loading. 
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.UTIL.requireCSS(<i>url [,callback]</i>)</h1>
					This function will import the CSS file asynchronizedly with the url parameter.
					The callback parameter is optional, when complete loading this resource, it will be invoked.
					<br/>To be metioned, if you do not pass 'callback' parameter, it will load this resource syncronizedly, which will block the 
					page rendering until finish loading. 
					<br/>You also need to pay attention to the resource URL in this CSS file, because the path should relate to current HTML page, instead of 
					this stylesheet.
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.UTIL.getURLParameter(<i>parameter</i>)</h1>
					This function will return the value of given parameter in current url address.
					<br/>
					<i>Example: 
					<pre>
	COM.EMC.UTIL.getURLParameter("uid"); //returns "9034" when current url is "localhost:8080/xxx?uid=9034"
					</pre>
					</i>
					<h1 class="xui_hightened">COM.EMC.UTIL.reload(<i>url1 [,url2,url3,...]</i>)</h1>
					This function will preload the resources, such as images, stylesheets, audios and so forth.
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.UTIL.guid()</h1>
					Generate global universal identifier.
					<br/><br/>
				</div>
				<div id="dateDoc">
				    <h1 class="xui_hightened">COM.EMC.DATE.dateToStr(<i>date [,options]</i>)</h1>
					This function requires a Date object and a json parameter. 
					<br/>This json parameter can have 3 properties 
					at most: date_concatenator("-" by default), time_concatenator(":" by default), 
					containTime(true by default). 
					<br/>
					<i>Example: 
					<pre>
	COM.EMC.DATE.dateToStr(new Date(),{date_concatenator:"/",containTime:false}); 
	//returns "2013/12/22"
	COM.EMC.DATE.dateToStr(new Date(),{containTime:true}); 
	//returns "2013-12-22 08:10"
					</pre>
					</i>
					<h1 class="xui_hightened">COM.EMC.DATE.getCurrentUTCDate()</h1>
					Returns UTC Date object of current client environment. <br/>
					The time region depends on the client browser.
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.DATE.localeDateToUTCDate(<i>localeDate</i>)</h1>
					This function requires a Date object which represents locale time(should be a javascript Date object).
					It returns the UTC Date object.<br/>
					The time region depends on the client browser. 
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.DATE.utcDateToLocaleDate(<i>utcDate</i>)</h1>
					Transforms UTC Date to locale Date object. 
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.DATE.utcDateToLocaleDate(<i>timezone [,utcDate]</i>)</h1>
					It requires two parameters, 'timezone' is a string and utcDate is optional.<br/>
					Timezone list:<br/>
					"GMT", "EST", "CST", "MST", "PST", "EDT", "CDT", "MDT", "PDT".<br/>
					This function returns locale Date object of given timezone.
					<br/><br/>
				</div>
				<div id="testDoc">
					<h1 class="xui_hightened">COM.EMC.TEST.assert(<i>expression,msg</i>)</h1>
					If the value of 'expression' equals FALSE, then throw out a exception with the given message 
					of parameter 'msg'.
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.TEST.assert(<i>value1,value2,msg</i>)</h1>
					If the 'value1' does not equal to 'value2', then throw out a exception with the given message 
					of parameter 'msg'.
					<br/><br/>
				</div>
				<div id="validationDoc">
					<h1 class="xui_hightened">COM.EMC.VALIDATE.validate(<i>selector,regex</i>)</h1>
					It validates if the text value of given node(referenced by parameter 'selector') matches the regular expression
					(referenced by parameter 'regex').<br/>
					To be metioned, 'regex' can also be a normal expression.
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.VALIDATE.createValidator(<i>selector,regex</i>)</h1>
					It creates a validator object which has only one method, "validate()".
					<br/><br/>
					<h1 class="xui_hightened">COM.EMC.VALIDATE.validate(<i>array</i>)</h1>
					Requires an array of Validator instances. This method will invoke "validate()" in every Validator of this array.
					<br/>
					<i>Example: 
					<pre>
	var num_validator=COM.EMC.VALIDATE.createValidator("#num_field","\\d+");
	var name_validator=COM.EMC.VALIDATE.createValidator("#name_field","\\w+");
	var isValid=COM.EMC.VALIDATE.validate([num_validator, name_validator]);
					</pre>
					</i>
				</div>
				<div id="uiDoc">
					<h1 class="xui_hightened">1. UI configuration</h1>
					With a configuration json, you can initiate UI styles to override the default configurations.
					<br/>
					The default configurations are:<br/>
					<pre>
	var config={
		title:"Blank Page", // title of page
		font_family:"Arial, Helvetica, sans-serif", // font of page
		body_width:"1000px", // width of body tag
		body_margin:"0px auto",
		background_color:"white", // background color of body
		background_image:"", //background image of body
		background_image_repeat:"",
		background_image_position:"",
		head_image:"", // image head of page
		head_height:"82px",
		head_text_system:"System Name",
		head_text_application:"Application Name",
		head_text_system_color:"WHITE",
		head_text_system_size:"16pt",
		head_text_application_color:"WHITE",
		head_text_application_size:"20pt",
		foot_info:"", // foot information
		rights_info:"", // rights information
		head_div_selector:"#head", // head image div
		content_div_selector:"#content", // content div
		foot_div_selector:"#foot", // foot div id
		menu_div_selector:"#menu", //menu div id
		dialog_div_selector:"#dialog", //dialog div id
		menu_font_color:"#FFFFFF", //menu font color
		menu_bg_color:"#333333", //menu background color
		menu_hover_font_color:"#FFFFFF", //menu hover font color
		menu_hover_bg_color:"#538ECB", //menu hover background colors
		menu_height:"30px", //menu height
		menu_font_size:"10pt", //menu font size
		menu_item_padding:"15px", //menu item padding
		dialog_font_size:"11pt", //dialog font size,
		loading_image:"", //loading image
		loading_div_selector:"#loadingDiv", //loading div selector
		welcome_info:"Welcome"//welcome info
	};
					</pre>
					<i>Example: 
					<pre>
	var ui=COM.EMC.UI;
	ui.configUI({
		menu_hover_font_color:"#EEE",
		title:"XCommon Doc",
		head_image : "images/head_image.png",
		head_text_system : "Documents and Examples",
		loading_image:"images/loadingPage.gif",
		head_text_application : "XCommon",
		foot_info : "This website is best viewed using Chrome, Firefox and IE 9+ web browsers.&lt;br/&gt;",
		rights_info : "Copyright 2013 EMC.&lt;br/&gt;"
	});
					</pre>
					</i>
					<h1 class="xui_hightened">2. Create page</h1>
					This page object has one method, "addMenuBar", which means we can add a menu bar later.
					<br/>
					<i>Example: 
					<pre>
	var ui=COM.EMC.UI;
	var page=ui.createPage();
					</pre>
					</i>
					<h1 class="xui_hightened">3. Create menu bar</h1>
					You need to create it via Page instance, and then, create a number of first-level menu items and  
					add them to the bar.<br/>
					Also, you can set welcome information on the bar via "setWelcomeInfo()" method.
					<br/>
					<i>Example: 
					<pre>
	var ui=COM.EMC.UI;
	var page=ui.createPage();
	var menubar=ui.createMenuBar();
	page.addMenuBar(menubar);
	var m1=ui.createMenuItem("Menu1");
	var m2=ui.createMenuItem("Menu2");
	menubar.addMenuItems(m1,m2); //OR, menubar.addMenuItem(m1); menubar.addMenuItem(m2);
	menubar.setWelcomeInfo();
					</pre>
					</i>
					<h1 class="xui_hightened">4. Create menu items</h1>
					There are two places to put a menu item: in the menu bar and be a sub-item of another menu item.
				    <br/>Menu item has two methods: "addClickListener()" and "setSubMenuItems()". 
				    <br/>"addClickListener()" method enables you to pass in String parameter or a Function parameter, 
				    and another "context" parameter is optional. When the first parameter is a string, it acts as a URL of some resource, 
				    and this method can lead the page to the url. When the first parameter is a function, it acts as a callback.
				    <br/>"setSubMenuItems()" requires a list of MenuItem objects as parameters.
					<br/>
					<i>Example: 
					<pre>
	var ui=COM.EMC.UI;
	var page=ui.createPage();
	var menubar=ui.createMenuBar();
	page.addMenuBar(menubar);
	var m1=ui.createMenuItem("Menu1");
	var m2=ui.createMenuItem("Menu2");
	menubar.addMenuItems(m1,m2); //OR, menubar.addMenuItem(m1); menubar.addMenuItem(m2);
	m1.addClickListener("www.emc.com"); //url
	m2.addClickListener(function(){   //callback
		//callback function logic goes...
	});
	var sm1=ui.createMenuItem("SubMenu1"); 
	var sm2=ui.createMenuItem("SubMenu2");
	m1.setSubMenuItems(sm1, sm2); //add sub menu items to m1
					</pre>
					</i>
					<h1 class="xui_hightened">5. Create dialog</h1>
					It requires a json format parameter, and it has these default settings:
					<pre>
	var params={
		isNew:true,  // use a new dialog or a existed one
		title:"Dialog",  //Dialog title
		html:"",   //HTML format content
		buttons:[],  //button array, <i>[{text:"...", click:function(){...} }, {...}, ... ]</i> format
		modal:true,
		resizable:false
	};
					</pre>
					All the settings is optional and can be overrided by input parameter. And the "buttons" setting should be an array of json (<i>"{text:..., click:...}</i>"). 
					If you do not set "buttons" property, the dialog will automatically provide a "Close" button to 
					enable you to close this dialog.<br/>
					Additionally, Dialog object has one method "close()" to destroy it.
					<br/>
					<i>Example: <br/>
					<img class="snapshot" src="images/doc4.png" width="160"/>
					<br/>
					<pre>
	var ui=COM.EMC.UI;
	ui.createDialog({
		html:"&lt;p&gt;Hello world!&lt;/p&gt;", 
		buttons:[{text:"OK",click:function(){console.log("OK");}}, {text:"Cancel",click:function(){console.log("Cancel");}}],
		resizable:true
	});
					</pre>
					</i>
					<h1 class="xui_hightened">6. Create loading gif</h1>
					When page is loading, you can create a semi-transparent overlap layer with a loading gif to hint the user what is going on.<br/>
					When finishes loading, you can invoke the "close" method to destroy it.
					<br/>
					<img class="snapshot" src="images/doc2.png" width="400"/>
					<br/>
					<i>Example: 
					<pre>
	var ui=COM.EMC.UI;
	var loadingGif=ui.createLoadingGif();
	//later, you can destroy it
	loadingGif.close();
					</pre>
					</i>
					<h1 class="xui_hightened">7. Create tree list 
					<br/>(requires "jquery.jstree.js", you can do this via "COM.EMC.UTIL.requireJS()" function)</h1>
					A tree list looks like this:<br/>
					<img class="snapshot" src="images/doc1.png" width="500"/>
					<br/>You need to write down a HTML code block, for example:
					<i>
					<pre>
	&lt;div id="tree_div"&gt;
		&lt;input type="radio" name="tree_radio" id="select_all"/&gt;
		&lt;label for="select_all"&gt;Select All&lt;/label&gt;
		&lt;input type="radio" name="tree_radio" id="clear_all"/&gt;
		&lt;label for="clear_all"&gt;Clear All&lt;/label&gt;
		&lt;div id="tree"&gt;&lt;/div&gt;
		&lt;a id="ok_btn"&gt;OK&lt;/a&gt;
	&lt;/div&gt;
					</pre>
					</i>
					The above HTML code represents a tree list layer, and it consists of two radio buttons, one tree list layer, and one button.<br/>
					Also, you may define a INPUT element to trigger this tree list to display:
					<i>
					<pre>
	&lt;input type="text" id="tree_input"/&gt;
					</pre>
					</i>
					When creating a tree list, you need to pass in a json format parameter. It has these attributes: 
					"input", "div", "tree", "selectAll", "clearAll", "ok", "themePath".
					<br/>"input" is the selector of input element which triggers the tree list to display. 
					(In the above HTML example, is "#tree_input")
					<br/>"div" is the selector of tree list layer itself. 
					(In the above HTML example, is "#tree_div")
					<br/>"tree" is the selector of tree list DIV. 
					(In the above HTML example, is "#tree")
					<br/>"selectAll" and "clearAll" are two radio buttons to select and deselect all the nodes in the tree. 
					(In the above HTML example, is "#select_all" and "#clear_all")
					<br/>"ok" is the selector of the button to confirm the selection.
					(In the above HTML example, is "#ok_btn")
					<br/>"themePath" is the url of jstree theme folder relative to current page.
					(In the above HTML example, is "javascripts/lib/themes/")
					<br/>
					<br/>
					After initalize the HTML side, you need to construct the tree data-structure by TreeNode object.<br/>
					Firstly, you need to create all the roots; then, you can add children to the parent nodes level by level. 
					At last, you need to add the roots to the TreeList object.
					<br/>
					When tree structure is complete, you can invoke "initTreeUI()" to do UI initialization and "enableEventCallBacks" to make widgets 
					responsive.<br/>
					By default, the tree list is editable (you can select and deselect and click buttons), but you can also disable it by "setIsEditable()" method of TreeList.
					<br/>
					<i>Example: </i><br/>
					<input type="text" id="tree_input" value="have a try"/>
					<i>
					<pre>
	&lt;!--HTML code--&gt;
	&lt;div id="tree_div"&gt;
		&lt;input type="radio" name="tree_radio" id="select_all"/&gt;
		&lt;label for="select_all"&gt;Select All&lt;/label&gt;
		&lt;input type="radio" name="tree_radio" id="clear_all"/&gt;
		&lt;label for="clear_all"&gt;Clear All&lt;/label&gt;
		&lt;div id="tree"&gt;&lt;/div&gt;
		&lt;a id="ok_btn"&gt;OK&lt;/a&gt;
	&lt;/div&gt;
	&lt;input type="text" id="tree_input"/&gt;
	
	//js code
	var ui=COM.EMC.UI;
	var root1=ui.createTreeNode("1","1"); //create tree node
	var root2=ui.createTreeNode("2","2");
	var node1=ui.createTreeNode("1.1","1.1");
	var node2=ui.createTreeNode("1.2","1.2");
	root1.addChildren(node1, node2); //OR, root1.addChild(node1); root1.addChild(node2);
	//bind HTML selector with TreeList
	var tree = ui.createTreeList({
		input : "#tree_input",
		div : "#tree_div",
		tree : "#tree",
		selectAll : "#select_all",
		clearAll : "#clear_all",
		ok : "#ok_btn",
		themePath:"javascripts/lib/themes/"
	});
	//put tree datastructure into tree list ui
	tree.addRoot(root1);
	tree.addRoot(root2);
	//init UI
	tree.initTreeUI();
	tree.enableEventCallBacks(); 
	//OR, tree.setIsEditable(false), to disable the widgets.
					</pre>
					</i>
					<h1 class="xui_hightened">8. Pagination
					<br/>(requires "pagination.js" and "pagination.css", you can do this via "COM.EMC.UTIL.requireJS()/requireCSS()" functions)</h1>
					The function "pageTable()" requires a json format parameter, it has several parameters and their default values are:
					<br/>
					<img class="snapshot" src="images/doc3.png" width="200"/>
					<pre>
	var params={
		items_per_page:5, //number of rows of each page
		current_page:0,
		num_display_entries:8,  //number of visible page icons
		from:1, //head row number
		row_selector:undefined,  //selector of rows to be paged
		pager_selector:undefined  //selector of pagination bar
	};
					</pre>
					You can override some of these settings. To be mentioned, you need to write a DIV element with the id equals to the "pager_selector" attribute.
					<br/>
					<i>Example: 
					<pre>
	&lt;!--HTML code--&gt;
	&lt;div id="pageBar"&gt;&lt;/div&gt;
	
	//js code
	var ui=COM.EMC.UI;
	ui.pageTable({
		row_selector:"#dataTable>tbody>tr",
		page_selector:"#pageBar"  //you need to write a div with id "pageBar" in the HTML
	});
					</pre>
					</i>
				</div>
				<div id="indexDoc">
					<h1 class="xui_hightened">Welcome! <br/><br/>Firstly, make sure you have: </h1>
					1. <a href="http://jquery.com/download/" target="_blank">jQuery lib</a><br/>
					2. <a href="http://jqueryui.com/download/" target="_blank">jQuery UI plugins</a><br/>
					3. <a href="javascripts/lib/XCommon-3.0.js" target="_blank">XCommon lib</a><br/>
					4. <a href="stylesheets/lib/XCommonUI-3.0.css" target="_blank">XCommon UI stylesheet</a>
					<br/><br/><br/>
					<h1 class="xui_hightened">Optionally, you may need: 
					<br/>(Other resources can be imported dynamically via "COM.EMC.UTIL.requireXXX()" functions.)</h1>
					1. <a href="http://www.jstree.com" target="_blank">jstree plugin</a><br/>
					2. <a href="https://github.com/gbirke/jquery_pagination" target="_blank">pagination plugin</a>
					<br/><br/><br/>
					<h1 class="xui_hightened">Lastly, you need to prepare a HTML page, for example: </h1>
					<pre>
	&lt;!DOCTYPE html&gt;
	&lt;html&gt;
		&lt;head&gt;
			&lt;meta charset="UTF-8"&gt;
			&lt;meta http-equiv="Cache-Control" content="no-cache"&gt;
			&lt;meta http-equiv="Pragma" content="no-cache"&gt;
			&lt;link href="stylesheets/lib/redmond/jquery-ui-1.10.1.custom.css" rel="stylesheet" type="text/css" /&gt;
			&lt;link href="stylesheets/lib/XCommonUI-3.0.css" rel="stylesheet" type="text/css" /&gt;
			&lt;title&gt;Index Page&lt;/title&gt;
			&lt;script type="text/javascript" src="javascripts/lib/jquery-1.9.1.min.js"&gt;&lt;/script&gt;
			&lt;script type="text/javascript" src="javascripts/lib/jquery-ui-1.10.1.custom.min.js"&gt;&lt;/script&gt;
			&lt;script type="text/javascript" src="javascripts/lib/XCommon-3.0.js"&gt;&lt;/script&gt;
			&lt;!--Other resources ...--&gt;
		&lt;/head&gt;
		&lt;body&gt;
			&lt;div id="head"&gt;
			&lt;/div&gt;
			&lt;div id="menu"&gt;
			&lt;/div&gt;
			&lt;div id="content"&gt;
				&lt;div class="xui_url_dir"&gt;
					:: Index
				&lt;/div&gt;
				&lt;div class="xui_title_bar"&gt;
					Index
				&lt;/div&gt;
				&lt;div class="xui_content_body"&gt;
					Welcome!
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div id="foot"&gt;
			&lt;/div&gt;
		&lt;/body&gt;
	&lt;/html&gt;
					</pre>
					<h1 class="xui_hightened">Let's start!</h1>
				</div>
			</div>
		</div>
		<div id="foot">
		</div>
		<div id="tree_div" style="display:none;">
			<input type="radio" name="tree_radio" id="select_all"/>
			<label for="select_all">Select All</label>
			<input type="radio" name="tree_radio" id="clear_all"/>
			<label for="clear_all">Clear All</label>
			<div id="tree"></div>
			<a id="ok_btn">OK</a>
		</div>
	</body>
</html>